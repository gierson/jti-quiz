<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title></title>
    <link rel="stylesheet" href="./main.css">
</head>


<body class="mainbody qEd">


    <div class="container quizsteps active">


        <div class="container__content-stepper"></div>


        <div class="container__content qEd">

            <div class="skip-quiz top">
                <a href="#"></a>
            </div>

            <form action="" class="container__content--quiz">


                <div class="container__content--quiz-part qpart1 visible" data-step="0">

                    <span class="pytanie-numer cc_anim">pytanie 1/6</span>
                    <h2 class="t2 cc_anim">Jakie stylizacje wolisz?</h2>


                    <div class="container__content--quiz-part-radios">
                        <label class="cc_anim container__content--A1">
                            <input type="radio" name="pytanie1" value="a1" class="rp radioPytanie0" data-step="1">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">w stonowanych kolorach</span>
                            </div>
                        </label>
                        <label class="cc_anim container__content--B1">
                            <input type="radio" name="pytanie1" value="b1" class="rp radioPytanie0" data-step="1">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">pełne wyrazistych barw</span>
                            </div>
                        </label>
                    </div>



                </div>



                <div class="container__content--quiz-part qpart2" data-step="1">

                    <span class="pytanie-numer cc_anim">pytanie 2/6</span>
                    <h2 class="t2 cc_anim">Twój styl na<br /> pierwszej randce:</h2>


                    <div class="container__content--quiz-part-radios">
                        <label class="cc_anim container__content--A2">
                            <input type="radio" name="pytanie2" value="a2" class="rp radioPytanie1" data-step="2">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Klasyczna elegancja</span>
                            </div>
                        </label>
                        <label class="cc_anim container__content--B2">
                            <input type="radio" name="pytanie2" value="b2" class="rp radioPytanie1" data-step="2">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Odważna kreacja </span>
                            </div>
                        </label>
                    </div>
                </div>




                <div class="container__content--quiz-part qpart3" data-step="2">
                    <span class="pytanie-numer cc_anim">pytanie 3/6</span>
                    <h2 class="t2 cc_anim">Jakie wzory dominują<br /> w&nbsp;Twojej szafie?</h2>


                    <div class="container__content--quiz-part-radios">
                        <label class="cc_anim container__content--A3">
                            <input type="radio" name="pytanie3" value="a3" class="rp radioPytanie2" data-step="3">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Drobne kwiatki, kropki
                                    i oryginalne nadruki</span>
                            </div>
                        </label>
                        <label class="cc_anim container__content--B3">
                            <input type="radio" name="pytanie3" value="b3" class="rp radioPytanie2" data-step="3">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Eleganckie głębokie przejścia</span>
                            </div>
                        </label>
                    </div>
                </div>



                <div class="container__content--quiz-part qpart4" data-step="3">
                    <span class="pytanie-numer cc_anim">pytanie 4/6</span>
                    <h2 class="t2 cc_anim">Kiedy myślisz o&nbsp;butach<br /> na specjalną okazję,<br /> co wybierasz?
                    </h2>


                    <div class="container__content--quiz-part-radios">
                        <label class="cc_anim container__content--A4">
                            <input type="radio" name="pytanie4" value="a4" class="rp radioPytanie3" data-step="4">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Stylowe botki</span>
                            </div>
                        </label>
                        <label class="cc_anim container__content--B4">
                            <input type="radio" name="pytanie4" value="b4" class="rp radioPytanie3" data-step="4">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Odważne, ponadczasowe szpilki</span>
                            </div>
                        </label>
                    </div>
                </div>


                <div class="container__content--quiz-part qpart5" data-step="4">
                    <span class="pytanie-numer cc_anim">pytanie 5/6</span>
                    <h2 class="t2 cc_anim">Jaki element garderoby<br /> najchętniej dodajesz, by<br /> podkręcić swój
                        wygląd?</h2>


                    <div class="container__content--quiz-part-radios">
                        <label class="cc_anim container__content--A5">
                            <input type="radio" name="pytanie5" value="a5" class="rp radioPytanie4" data-step="5">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Efektowna biżuteria w&nbsp;mocnym
                                    kolorze</span>
                            </div>
                        </label>
                        <label class="cc_anim container__content--B5">
                            <input type="radio" name="pytanie5" value="b5" class="rp radioPytanie4" data-step="5">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Delikatny szal lub apaszka w&nbsp;subtelnym
                                    odcieniu</span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="container__content--quiz-part qpart6" data-step="5">
                    <span class="pytanie-numer cc_anim">pytanie 6/6</span>
                    <h2 class="t2 cc_anim">Idealna sukienka<br /> dla Ciebie to:</h2>


                    <div class="container__content--quiz-part-radios">
                        <label class="cc_anim container__content--A6">
                            <input type="radio" name="pytanie6" value="a6" class="rp radioPytanie5 lastRadio"
                                data-step="6">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Zwiewna, w&nbsp;pastelowych barwach</span>
                            </div>
                        </label>
                        <label class="cc_anim container__content--B6">
                            <input type="radio" name="pytanie6" value="b6" class="rp radioPytanie5 lastRadio"
                                data-step="6">
                            <div class="container__content-radio">
                                <div class="container__content-radioImg"></div>
                                <span class="container_content-radioSpan">Dopasowana, podkreślająca figurę</span>
                            </div>
                        </label>
                    </div>
                </div>




            </form>
        </div>

        <div class="container resultcontainer">
            <div class="container__content resultEd">
                <div class="result-box">
                    <div class="result-img result1"></div>
                    <div class="result-contentContainer result-contentContainer--1">
                        <p class="result-title">Mocny Fiolet</p>

                        <p class="result-content">Lubisz się wyróżniać i podkreślać swoją osobowość odważnymi
                            stylizacjami. Twoja garderoba emanuje kreatywnością i pewnością siebie. Nie boisz się
                            mocnych kolorów, nietypowych krojów i zabawy formą.</p>

                        <p class="result-content result-content--upper ">Za przejście quizu Zdobywasz 50 punktów
                            Lojalnościowych.</p>

                        <p class="result-content result-content--small result-content--upper ">Ich ilość przyznawana
                            jest jednorazowo za udział, niezależnie od wyniku. Punkty zostaną automatycznie naliczone na
                            Twoje konto. </p>

                        <div class="my-points-add" data-wait="600" data-value="50">
                            <div class="my-points-add__background"></div>
                            <div class="progress-ring">
                                <div class="progress-circle progress-circle--res-1"></div>
                                <span class="progress-value progress-value--res-1">0</span>
                            </div>
                        </div>


                        <a href="#" class="btn btn-primary-colors-negative">dodaj punkty</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="container resultcontainer">
            <div class="container__content resultEd">
                <div class="result-box">
                    <div class="result-img result2"></div>
                    <div class="result-contentContainer result-contentContainer--2">
                        <p class="result-title">Jasny Róż</p>

                        <p class="result-content">Twój styl to delikatność, subtelność i kobiecość. Uwielbiasz zwiewne
                            materiały, pastelowe barwy i harmonijne połączenia. Wybierasz dodatki, które podkreślają
                            Twój optymistyczny i pogodny charakter.</p>

                        <p class="result-content result-content--upper ">Za przejście quizu Zdobywasz 50 punktów
                            Lojalnościowych.</p>

                        <p class="result-content result-content--small result-content--upper ">Ich ilość przyznawana
                            jest jednorazowo za udział, niezależnie od wyniku. Punkty zostaną automatycznie naliczone na
                            Twoje konto. </p>

                        <div class="my-points-add" data-wait="600" data-value="50">
                            <div class="my-points-add__background"></div>
                            <div class="progress-ring">
                                <div class="progress-circle progress-circle--res-2"></div>
                                <span class="progress-value progress-value--res-2">0</span>
                            </div>
                        </div>


                        <a href="#" class="btn btn-primary-colors-negative">dodaj punkty</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="container resultcontainer">
            <div class="container__content resultEd">
                <div class="result-box">
                    <div class="result-img result3"></div>
                    <div class="result-contentContainer result-contentContainer--3">
                        <p class="result-title">Ciemny Róż</p>

                        <p class="result-content">Jesteś uosobieniem kobiecej siły i wyrafinowania. Twój styl balansuje
                            między elegancją a odrobiną tajemniczości. Kochasz głębokie, nasycone barwy, szlachetne
                            tkaniny i klasyczne fasony, które podkreślają Twoją pewność siebie.</p>

                        <p class="result-content result-content--upper ">Za przejście quizu Zdobywasz 50 punktów
                            Lojalnościowych.</p>

                        <p class="result-content result-content--small result-content--upper ">Ich ilość przyznawana
                            jest jednorazowo za udział, niezależnie od wyniku. Punkty zostaną automatycznie naliczone na
                            Twoje konto. </p>

                        <div class="my-points-add" data-wait="600" data-value="50">
                            <div class="my-points-add__background"></div>
                            <div class="progress-ring">
                                <div class="progress-circle progress-circle--res-3"></div>
                                <span class="progress-value progress-value--res-3">0</span>
                            </div>
                        </div>


                        <a href="#" class="btn btn-primary-colors-negative">dodaj punkty</a>
                    </div>
                </div>
            </div>
        </div>

    </div>



</body>

</html>



<script>

    function introButton() {
        ibtn = document.querySelectorAll('.introButton');
        ibtn.forEach(element => {
            element.addEventListener('click', function () {
                let a = document.querySelectorAll('.intro');
                a[0].classList.remove('active');
                let b = document.querySelectorAll('.quizsteps');
                b[0].classList.add('active');
                let c = document.querySelectorAll('.mainbody');
                c[0].classList.add('qEd');
            });
        });
    }
    introButton();

    // function instrButton() {
    //     instbtn = document.querySelectorAll('.instrButton');
    //     instbtn.forEach(element => {
    //         element.addEventListener('click', function () {
    //             let a = document.querySelectorAll('.instrukcja');
    //             a[0].classList.remove('active');
    //             let b = document.querySelectorAll('.quizsteps');
    //             b[0].classList.add('active');
    //             let c = document.querySelectorAll('.mainbody');
    //             c[0].classList.add('qEd');
    //         });
    //     });
    // }
    // instrButton();

    function steps() {
        allSteps = document.querySelectorAll('.container__content--quiz-part');
        allRadioPytanie = document.querySelectorAll('.rp');
        stepper = document.querySelectorAll('.container__content-stepper');
        skipLink = document.querySelectorAll('.skip-quiz.top');
        lastRadio = document.querySelectorAll('.lastRadio');
        allResults = document.querySelectorAll('.resultcontainer');
        body = document.querySelectorAll('.mainbody');


        // console.log(allSteps.length);

        var a = 0;
        for (let i = 0; i < allRadioPytanie.length; i++) {
            allRadioPytanie[i].addEventListener('click', function () {
                var y = document.querySelectorAll('.container__content--quiz-part.visible .cc_anim');
                var z = document.querySelectorAll('.container__content--quiz-part .cc_anim');
                for (let e = 0; e < z.length; e++) {
                    z[e].classList.remove('animv2');
                }
                for (let k = 0; k < y.length; k++) {
                    y[k].classList.add('animv1');
                }

                setTimeout(function () {
                    for (let o = 0; o < z.length; o++) {
                        z[o].classList.remove('animv1');
                    }
                    for (let u = 0; u < z.length; u++) {
                        z[u].classList.add('animv2');
                    }
                    if (a < allSteps.length - 1) {
                        allSteps.forEach(element => {
                            element.classList.remove('visible');
                        });
                        a = a + 1;
                        allSteps[a].classList.add('visible');
                        stepper[0].classList.add('step' + a);
                    }
                }, 1200);



            });
        }
        lastRadio.forEach(element => {
            element.addEventListener('click', function () {
                allSteps.forEach(element => {
                    element.classList.remove('visible');
                });
                stepper[0].classList.add('hide');
                // skipLink[0].parentElement.classList.add('hide');


                allResults[0].classList.add('active');
                allResults[0].classList.add('animv4');

                body[0].classList.add('resultBg');

                document.getElementsByClassName("my-points-add")[0].classList.add("show");

            });
        });
    }
    steps();


    // komponent my-points animacja


    function initializeProgressCircles(progressBar) {
        const animationDuration = 1000; // Czas trwania animacji w milisekundach


        const wait = parseInt(progressBar.getAttribute("data-wait")) || 0;
        const maxValue = parseInt(progressBar.getAttribute("data-value")) || 100;
        const progressValueElement = progressBar.querySelector(".progress-value");
        const progressCircle = progressBar.querySelector(".progress-circle");

        // Ustawienie wartości w .progress-value na 0
        progressValueElement.textContent = 0;
        progressCircle.style.maskImage = `conic-gradient(#000 0deg, transparent 0deg)`;


        function updateProgress(currentValue) {
            const percent = (currentValue / maxValue) * 100;
            const angle = (percent / 100) * 360;
            progressCircle.style.maskImage = `conic-gradient(#000 ${angle}deg, transparent 0deg)`;

            // Ustaw wartość w .progress-value
            progressValueElement.textContent = Math.round(currentValue);
        }

        setTimeout(() => {
            let currentValue = 0;
            const increment = maxValue / (animationDuration / 20); // Obliczenie kroku zwiększania

            const interval = setInterval(() => {
                if (currentValue >= maxValue) {
                    updateProgress(maxValue);
                    clearInterval(interval);
                } else {
                    currentValue += increment;
                    updateProgress(Math.min(currentValue, maxValue));
                }
            }, 20);
        }, wait);
    }

    function observeProgressBars() {
        const progressBars = document.querySelectorAll(".my-points-add");

        progressBars.forEach((progressBar) => {
            const observer = new MutationObserver((mutationsList) => {
                for (const mutation of mutationsList) {

                    if (
                        mutation.type === "attributes" &&
                        mutation.attributeName === "class" &&
                        progressBar.classList.contains("show")
                    ) {

                        initializeProgressCircles(progressBar);
                        // observer.disconnect(); // Przestań obserwować po zainicjowaniu
                    }
                }
            });

            // Obserwacja zmian w atrybutach, w tym klasach
            observer.observe(progressBar, { attributes: true });
        });
    }

    window.addEventListener("DOMContentLoaded", observeProgressBars);

</script>